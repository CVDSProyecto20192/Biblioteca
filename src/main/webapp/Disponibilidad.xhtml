<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:f="http://java.sun.com/jsf/core"      
      xmlns:h="http://java.sun.com/jsf/html"

	  xmlns:p="http://primefaces.org/ui">
	  
	<h:head>
		<title>Disponibilidad</title>
	</h:head>

	<h:head>
		<script src="https://kit.fontawesome.com/a076d05399.js"></script>
	</h:head>
	<h:body>
		<h:form id="horario">
			<p:growl id="messages" showDetail="true" />

			<h1 style="text-align: center;">Consultar Disponibilidad</h1>

			<h:panelGrid>

				<p:schedule value="#{DispoBean.eventModel}" widgetVar="myschedule" timeZone="GMT-5" >
					<p:ajax event="eventSelect" listener="#{DispoBean.onEventSelected}" oncomplete="PF('infoDialog').show();" update="@form" />
					<p:ajax event="dateSelect" listener="#{DispoBean.onDateSelected}" oncomplete="PF('eventDialog').show();"/>
				</p:schedule>  

			</h:panelGrid>
			
			<p:dialog widgetVar="eventDialog" header="Reserva" showEffect="clip" hideEffect="clip">
				<h:panelGrid id="Reserva" columns="2" >
					<h:panelGrid id="panelHora" columns="4" rendered="#{DispoBean.hora == 100}">
						<p:outputLabel for="Hora" value="Hora de la Reserva "/>
						<p:inputNumber id="Hora" value="#{DispoBean.hora}" minValue="0" maxValue="24" />
						<p:outputLabel value=":"/>
						<p:inputNumber id="Minutos" value="#{DispoBean.minutos}" minValue="0" maxValue="59"/>
					</h:panelGrid>	
					<p:outputLabel value=""/>
					<h:panelGrid id="panelDuracion" columns="4">
						<p:outputLabel for="duracionHora" value="Duracion de la reserva "/>
						<p:inputNumber id="duracionHora" value="#{DispoBean.duracionHora}" required="true" minValue="0" maxValue="2" />
						<p:outputLabel for="duracionMinutos" value=":"/>
						<p:inputNumber id="duracionMinutos" value="#{DispoBean.duracionMinutos}" required="true" minValue="0" maxValue="59"/>
					</h:panelGrid>
					<p:outputLabel value=""/>
					<h:form id="concurrente">
						<h:outputText value="Recurrente: "/>
						<h:selectBooleanCheckbox id="repetir" onclick="hideOrShow(this.checked);"/>
						<h:panelGrid id="panel1" columns="2">
							<h:outputText value="Repetir cada (dias): "/>
							<p:inputNumber id="repetirVal" value="#{DispoBean.repetir}" minValue="0" decimalPlaces="0"/>
							<p:outputLabel for="fechaFin" value="Fecha fin: " />
							<p:datePicker id="fechaFin" value="#{DispoBean.fechaFin}" locale="es" monthNavigator="true" pattern="yyyy-MM-dd"/>
						</h:panelGrid>
					</h:form>
					<h:commandButton value="Reservar" action="#{DispoBean.actionReservar}" update="@form"/>
				</h:panelGrid>
			</p:dialog>
			
			<p:dialog header="Info" widgetVar="infoDialog" modal="true" showEffect="fade" hideEffect="fade" resizable="false">
				<h:panelGrid columns="2" border="1" cellpadding="10" cellspacing="1">

					<f:facet name="header">
						<img src="img/Booking.png"/>
					</f:facet>

					<h:outputText value="Recurso reservado"/>
					<h:outputText value="#{DispoBean.selected.recurso.nombre}"/>
					
					<h:outputText value ="Fecha de solicitud"/>
					<h:outputText value="#{DispoBean.selected.fecha}"/>

					<h:outputText value ="Fecha de inicio"/>
					<h:outputText value="#{DispoBean.selected.fechaI}"/>

					<h:outputText value="Fecha de finalización"/>
					<h:outputText value="#{DispoBean.selected.fechaF}"/>

					<h:outputText value="Usuario" />
					<h:outputText value ="#{DispoBean.selected.usuario.nombres}"/>

				</h:panelGrid>
			</p:dialog>
			
		</h:form>
	</h:body>
	
<script type="text/javascript">
    function hideOrShow(show) {
        // Get the panel using its ID
        var obj = document.getElementById("horario:concurrente:panel1");
		var obj2 = document.getElementById("horario:concurrente:panel2");
        if (show) {
            obj.style.display = "block";
			obj2.style.display = "block";
        } else {
            obj.style.display = "none";
			obj2.style.display = "none";
        }
    }
</script>

<script type="text/javascript">
            PrimeFaces.locales['es'] = {
                closeText: 'Cerrar',
                prevText: 'Anterior',
                nextText: 'Siguiente',
                monthNames: ['Enero', 'Febrero', 'Marzo', 'Abril', 'Mayo', 'Junio', 'Julio', 'Agosto', 'Septiembre', 'Octubre', 'Noviembre', 'Diciembre'],
                monthNamesShort: ['Ene', 'Feb', 'Mar', 'Abr', 'May', 'Jun', 'Jul', 'Ago', 'Sep', 'Oct', 'Nov', 'Dic'],
                dayNames: ['Domingo', 'Lunes', 'Martes', 'Miércoles', 'Jueves', 'Viernes', 'Sábado'],
                dayNamesShort: ['Dom', 'Lun', 'Mar', 'Mie', 'Jue', 'Vie', 'Sab'],
                dayNamesMin: ['D', 'L', 'M', 'X', 'J', 'V', 'S'],
                weekHeader: 'Semana',
                firstDayOfWeek: 1,
                isRTL: false,
                showMonthAfterYear: false,
                yearSuffix: '',
                timeOnlyTitle: 'Sólo hora',
                timeText: 'Tiempo',
                hourText: 'Hora',
                minuteText: 'Minuto',
                secondText: 'Segundo',
                currentText: 'Fecha actual',
                ampm: false,
                month: 'Mes',
                week: 'Semana',
                day: 'Día',
                allDayText: 'Todo el día'
            };
</script>

</html>