<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:f="http://java.sun.com/jsf/core"      
      xmlns:h="http://java.sun.com/jsf/html"

      xmlns:p="http://primefaces.org/ui">

    
    <h:head>
        
        <title>Reportes</title>

    </h:head>

    <h:body>

        <h1 style="text-align: center;">Reportes y estadisticas de los registros</h1>

        <h:form>
            <h:panelGrid cellpadding="5" style="margin: auto;">
            
                <h:panelGrid columns="2" cellpadding="5" style="margin: auto;">
                    <p:outputLabel value="Mostrar por: "/>
                    <p:selectOneMenu value="#{ReportBean.show}">
                        <p:ajax listener="#{ReportBean.showTable}" update="@form"/>
                        <f:selectItem itemLabel="Seleccionar" itemValue=""/>
                        <f:selectItem itemLabel="Recursos más usados" itemValue="masUsados"/>
                        <f:selectItem itemLabel="Recursos menos usados" itemValue="menosUsados"/>
                        <f:selectItem itemLabel="Horarios con mayor ocupación de recursos" itemValue="horariosMas"/>
                        <f:selectItem itemLabel="Horarios con menor ocupación de recursos" itemValue="horariosMenos"/>
                        <f:selectItem itemLabel="Reservas recurrentes" itemValue="recurrentes"/>
                    </p:selectOneMenu>
                </h:panelGrid>

                <h:panelGrid id="recursosMasUsados" style="margin: auto;" cellpadding="15"> 
                    <p:dataTable var="reserva" value="#{ReportBean.recursosFrecuentes}" style="width: 950px;" rendered="#{ReportBean.masUsados}">
                        
                        <f:facet name="header">
                            Totalizado por fecha
                        </f:facet>

                        <p:column headerText="Id Recurso" style="text-align: center;" filterBy="#{reserva.recurso.id}" sortBy="#{reserva.recurso.id}" >
                            <h:outputText value="#{reserva.recurso.id}"/>
                        </p:column>
        
                        <p:column headerText="Nombre Recurso" style="text-align: center;" filterBy="#{reserva.recurso.nombre}" sortBy="#{reserva.recurso.nombre}" >
                            <h:outputText value="#{reserva.recurso.nombre}"/>
                        </p:column>
                        
                        <p:column headerText="Fecha de reserva" style="text-align: center; width: 300px;" filterBy="#{reserva.fecha}" sortBy="#{reserva.fecha}">
                            <h:outputText value="#{reserva.fecha}"/>
                        </p:column>
                        
                        <p:column headerText="Veces reservado" style="text-align: center;" filterBy="#{reserva.count}" sortBy="#{reserva.count}">
                            <h:outputText value="#{reserva.count}"/>
                        </p:column>
                    </p:dataTable>

                    <p:dataTable var="reserva" value="#{ReportBean.recursosFrecuentesXHorario}" style="width: 950px;" rendered="#{ReportBean.masUsados}">
                        
                        <f:facet name="header">
                            Totalizado por horario
                        </f:facet>

                        <p:column headerText="Id Recurso" style="text-align: center;" filterBy="#{reserva.recurso.id}" sortBy="#{reserva.recurso.id}" >
                            <h:outputText value="#{reserva.recurso.id}"/>
                        </p:column>
        
                        <p:column headerText="Nombre Recurso" style="text-align: center;" filterBy="#{reserva.recurso.nombre}" sortBy="#{reserva.recurso.nombre}" >
                            <h:outputText value="#{reserva.recurso.nombre}"/>
                        </p:column>
                        
                        <p:column headerText="Fecha de reserva" style="text-align: center;" filterBy="#{reserva.hora}" sortBy="#{reserva.hora}">
                            <h:outputText value="#{reserva.hora}"/>
                        </p:column>
                        
                        <p:column headerText="Veces reservado" style="text-align: center;" filterBy="#{reserva.count}" sortBy="#{reserva.count}">
                            <h:outputText value="#{reserva.count}"/>
                        </p:column>
                    </p:dataTable>

                    <p:dataTable var="reserva" value="#{ReportBean.menosFrecuenteXTipo}" style="width: 950px;" rendered="#{ReportBean.masUsados}">
                        
                        <f:facet name="header">
                            Totalizado por tipo de recurso
                        </f:facet>

                        <p:column headerText="Id Recurso" style="text-align: center;" filterBy="#{reserva.recurso.id}" sortBy="#{reserva.recurso.id}" >
                            <h:outputText value="#{reserva.recurso.id}"/>
                        </p:column>
        
                        <p:column headerText="Nombre Recurso" style="text-align: center;" filterBy="#{reserva.recurso.nombre}" sortBy="#{reserva.recurso.nombre}" >
                            <h:outputText value="#{reserva.recurso.nombre}"/>
                        </p:column>
                        
                        <p:column headerText="Tipo de recurso" style="text-align: center;" filterBy="#{reserva.hora}" sortBy="#{reserva.hora}">
                            <h:outputText value="#{reserva.recurso.tipo.tipo}"/>
                        </p:column> 
                        
                        <p:column headerText="Veces reservado" style="text-align: center;" filterBy="#{reserva.count}" sortBy="#{reserva.count}">
                            <h:outputText value="#{reserva.count}"/>
                        </p:column>
                    </p:dataTable>



                    <p:dataTable var="reserva" value="#{ReportBean.menosFrecuentesXFecha}" style="width: 950px;" rendered="#{ReportBean.menosUsados}">
                        
                        <f:facet name="header">
                            Totalizado por fecha
                        </f:facet>

                        <p:column headerText="Id Recurso" style="text-align: center;" filterBy="#{reserva.recurso.id}" sortBy="#{reserva.recurso.id}" >
                            <h:outputText value="#{reserva.recurso.id}"/>
                        </p:column>
        
                        <p:column headerText="Nombre Recurso" style="text-align: center;" filterBy="#{reserva.recurso.nombre}" sortBy="#{reserva.recurso.nombre}" >
                            <h:outputText value="#{reserva.recurso.nombre}"/>
                        </p:column>
                        
                        <p:column headerText="Fecha de reserva" style="text-align: center; width: 300px;" filterBy="#{reserva.fecha}" sortBy="#{reserva.fecha}">
                            <h:outputText value="#{reserva.fecha}"/>
                        </p:column>
                        
                        <p:column headerText="Veces reservado" style="text-align: center;" filterBy="#{reserva.count}" sortBy="#{reserva.count}">
                            <h:outputText value="#{reserva.count}"/>
                        </p:column>
                    </p:dataTable>

                    <p:dataTable var="reserva" value="#{ReportBean.recursosMenosFrecuentesXHorario}" style="width: 950px;" rendered="#{ReportBean.menosUsados}">
                        
                        <f:facet name="header">
                            Totalizado por horario
                        </f:facet>

                        <p:column headerText="Id Recurso" style="text-align: center;" filterBy="#{reserva.recurso.id}" sortBy="#{reserva.recurso.id}" >
                            <h:outputText value="#{reserva.recurso.id}"/>
                        </p:column>
        
                        <p:column headerText="Nombre Recurso" style="text-align: center;" filterBy="#{reserva.recurso.nombre}" sortBy="#{reserva.recurso.nombre}" >
                            <h:outputText value="#{reserva.recurso.nombre}"/>
                        </p:column>
                        
                        <p:column headerText="Horario reserva" style="text-align: center;" filterBy="#{reserva.hora}" sortBy="#{reserva.hora}">
                            <h:outputText value="#{reserva.hora}"/>
                        </p:column>
                        
                        <p:column headerText="Veces reservado" style="text-align: center;" filterBy="#{reserva.count}" sortBy="#{reserva.count}">
                            <h:outputText value="#{reserva.count}"/>
                        </p:column>
                    </p:dataTable>

                    <p:dataTable var="reserva" value="#{ReportBean.frecuenteXTipo}" style="width: 950px;" rendered="#{ReportBean.menosUsados}">
                        
                        <f:facet name="header">
                            Totalizado por tipo de recurso
                        </f:facet>

                        <p:column headerText="Id Recurso" style="text-align: center;" filterBy="#{reserva.recurso.id}" sortBy="#{reserva.recurso.id}" >
                            <h:outputText value="#{reserva.recurso.id}"/>
                        </p:column>
        
                        <p:column headerText="Nombre Recurso" style="text-align: center;" filterBy="#{reserva.recurso.nombre}" sortBy="#{reserva.recurso.nombre}" >
                            <h:outputText value="#{reserva.recurso.nombre}"/>
                        </p:column>
                        
                        <p:column headerText="Tipo de recurso" style="text-align: center;" filterBy="#{reserva.hora}" sortBy="#{reserva.hora}">
                            <h:outputText value="#{reserva.recurso.tipo.tipo}"/>
                        </p:column> 
                        
                        <p:column headerText="Veces reservado" style="text-align: center;" filterBy="#{reserva.count}" sortBy="#{reserva.count}">
                            <h:outputText value="#{reserva.count}"/>
                        </p:column>
                    </p:dataTable>



                    <p:dataTable var="hora" value="#{ReportBean.horarioMasFrecuente}" style="width: 950px;" rendered="#{ReportBean.horariosMas}">
                        <f:facet name="header">
                            Horarios totalizados por horario
                        </f:facet>
                        <p:column headerText="Franja horaria" style="text-align: center;" filterBy="#{hora.hora}" sortBy="#{hora.hora}" >
                            <h:outputText value="#{hora.hora}"/>
                        </p:column>

                        <p:column headerText="Recursos reservados" style="text-align: center;" filterBy="#{hora.coun}" sortBy="#{hora.count}" >
                            <h:outputText value="#{hora.count}"/>
                        </p:column>
                    </p:dataTable>
                    
                    <p:dataTable var="hora" value="#{ReportBean.horariosMasXFecha}" style="width: 950px;" rendered="#{ReportBean.horariosMas}">
                        <f:facet name="header">
                            Horarios totalizados por fecha
                        </f:facet>
                        <p:column headerText="Franja horaria" style="text-align: center;" filterBy="#{hora.hora}" sortBy="#{hora.hora}" >
                            <h:outputText value="#{hora.hora}"/>
                        </p:column>

                        <p:column headerText="Fecha" style="text-align: center;" filterBy="#{hora.fecha}" sortBy="#{hora.fecha}" >
                            <h:outputText value="#{hora.fecha}"/>
                        </p:column>

                        <p:column headerText="Recursos reservados" style="text-align: center;" filterBy="#{hora.count}" sortBy="#{hora.count}" >
                            <h:outputText value="#{hora.count}"/>
                        </p:column>
                    </p:dataTable>

                    <p:dataTable var="hora" value="#{ReportBean.horariosMasXTipo}" style="width: 950px;" rendered="#{ReportBean.horariosMas}">
                        <f:facet name="header">
                            Horarios totalizados por tipo de recurso
                        </f:facet>

                        <p:column headerText="Horario" style="text-align: center;" filterBy="#{hora.hora}" sortBy="#{hora.hora}" >
                            <h:outputText value="#{hora.hora}"/>
                        </p:column>
                        
                        <p:column headerText="Tipo recurso" style="text-align: center;" filterBy="#{hora.recurso.tipo.tipo}" sortBy="#{hora.recurso.tipo.tipo}" >
                            <h:outputText value="#{hora.recurso.tipo.tipo}"/>
                        </p:column>

                        <p:column headerText="Recursos reservados" style="text-align: center;" filterBy="#{hora.count}" sortBy="#{hora.count}" >
                            <h:outputText value="#{hora.count}"/>
                        </p:column>
                        
                    </p:dataTable>


                    <p:dataTable var="hora" value="#{ReportBean.horarioMenosFrecuente}" style="width: 950px;" rendered="#{ReportBean.horariosMenos}">
                        <f:facet name="header">
                            Horarios totalizados por horario
                        </f:facet>
                        <p:column headerText="Franja horaria" style="text-align: center;" filterBy="#{hora.hora}" sortBy="#{hora.hora}" >
                            <h:outputText value="#{hora.hora}"/>
                        </p:column>

                        <p:column headerText="Recursos reservados" style="text-align: center;" filterBy="#{hora.coun}" sortBy="#{hora.count}" >
                            <h:outputText value="#{hora.count}"/>
                        </p:column>
                    </p:dataTable>
                    
                    <p:dataTable var="hora" value="#{ReportBean.horariosMenosXFecha}" style="width: 950px;" rendered="#{ReportBean.horariosMenos}">
                        <f:facet name="header">
                            Horarios totalizados por fecha
                        </f:facet>
                        <p:column headerText="Franja horaria" style="text-align: center;" filterBy="#{hora.hora}" sortBy="#{hora.hora}" >
                            <h:outputText value="#{hora.hora}"/>
                        </p:column>

                        <p:column headerText="Fecha" style="text-align: center;" filterBy="#{hora.fecha}" sortBy="#{hora.fecha}" >
                            <h:outputText value="#{hora.fecha}"/>
                        </p:column>

                        <p:column headerText="Recursos reservados" style="text-align: center;" filterBy="#{hora.count}" sortBy="#{hora.count}" >
                            <h:outputText value="#{hora.count}"/>
                        </p:column>
                    </p:dataTable>

                    <p:dataTable var="hora" value="#{ReportBean.horariosMenosXTipo}" style="width: 950px;" rendered="#{ReportBean.horariosMenos}">
                        <f:facet name="header">
                            Horarios totalizados por tipo de recurso
                        </f:facet>

                        <p:column headerText="Horario" style="text-align: center;" filterBy="#{hora.hora}" sortBy="#{hora.hora}" >
                            <h:outputText value="#{hora.hora}"/>
                        </p:column>
                        
                        <p:column headerText="Tipo recurso" style="text-align: center;" filterBy="#{hora.recurso.tipo.tipo}" sortBy="#{hora.recurso.tipo.tipo}" >
                            <h:outputText value="#{hora.recurso.tipo.tipo}"/>
                        </p:column>

                        <p:column headerText="Recursos reservados" style="text-align: center;" filterBy="#{hora.count}" sortBy="#{hora.count}" >
                            <h:outputText value="#{hora.count}"/>
                        </p:column>
                        
                    </p:dataTable>
                </h:panelGrid>
               
            </h:panelGrid>   
        </h:form>
    </h:body>
      
</html>