<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:f="http://java.sun.com/jsf/core"      
      xmlns:h="http://java.sun.com/jsf/html"

      xmlns:p="http://primefaces.org/ui">
	
	<h:head>
		<link rel="stylesheet" type="text/css" href="css/recursos.css" />
		
		<meta http-equiv="Expires" content="0" />
		<meta http-equiv="Pragma" content="no-cache" />
		
		<script type="text/javascript">
		  if(history.forward(1)){
		    location.replace( history.forward(1) );
		  }
		</script>
		
		<title>Recursos</title>
		
    </h:head>
    
    <h:body onload="nobackbutton();">
        <h:form id="recursos_form">
        	<div class="arriba">
					
					<h:commandButton image="img/home.svg" id= "home" class="home"
					action="#{ReservaBean.page01}" update="recursos_form"></h:commandButton>	
					 &nbsp; 
					<h:commandButton image="img/logout.svg" id= "close" class="close"
					actionListener="#{LoginBean.logout}" update="recursos_form"></h:commandButton>	
				
					
					<h1>Biblioteca</h1>
					<h2>Recursos</h2>
			</div>
		
			<br/>
       	 
            <div>
                <div style="text-align: center" class='table'>
                
                    <p:dataTable class="recursos" value="#{RecursosBean.listaRecursos}" var = "recurso" style="margin: 0 auto;"
                    rows="8" paginator="true" 
    				paginatorTemplate="{RowsPerPageDropdown} {CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink}" 
    				rowsPerPageTemplate="8, 16, 24">
    				
    					<p:column headerText="Id Recurso" filterBy="#{recurso.id}">
                        	<h:outputText value="#{recurso.id}"></h:outputText>
                        </p:column>            
						
                        <p:column headerText="Nombre" filterBy="#{recurso.nombre}">
                        	<h:outputText value="#{recurso.nombre}"></h:outputText>
                        </p:column>

                        <p:column headerText="Ubicacion" filterBy="#{recurso.ubicacion}">
                        	<h:outputText value="#{recurso.ubicacion}"></h:outputText>
                        </p:column>       
                        
                        <p:column headerText="Capacidad" filterBy="#{recurso.capacidad}">
                        	<h:outputText value="#{recurso.capacidad}"></h:outputText>
                        </p:column>            
						
                        <p:column headerText="Disponible" filterBy="#{recurso.disponible}">
                        	<h:outputText value="#{recurso.disponible}"></h:outputText>
                        </p:column>

                        <p:column headerText="Tipo" filterBy="#{recurso.tipo.tipo}">
                        	<h:outputText value="#{recurso.tipo.tipo}"></h:outputText>
                        </p:column>  

						<p:column headerText="Estado">
      						<p:commandButton actionListener="#{RecursosBean.actionBloquear(recurso.id)}" value="#{RecursosBean.actionEstado(recurso.disponible, recurso.capacidad)}" update="recursos_form" />            
      				    </p:column>  
						
						<p:column headerText="Horarios">
      						<p:commandButton actionListener="#{RecursosBean.actionHorarios(recurso.id)}" action="#{ReservaBean.page7}" value="Ver" update="recursos_form" />            
      				    </p:column>
					
                    </p:dataTable>
                </div>  
              
            </div>
			
			<br/>

		
			<div class="backDiv" style="text-align: center">
				<p:commandButton id= "back"  class="back" value="Back" 
				action="#{ReservaBean.page2}" update="recursos_form"></p:commandButton>
			
           	</div> 

			
			<br/>

        </h:form>
    </h:body>
    
</html>